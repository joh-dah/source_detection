schema: '2.0'
stages:
  generate-validation-data@karate:
    cmd: python -W ignore -m src.data_creation --validation --dataset=karate
    deps:
    - path: src/data_creation.py
      md5: c0be7bed9571a10e4a90bc555e3882da
      size: 9621
    params:
      params.yaml:
        data_creation:
          small_input: true
          training_size: 1000
          validation_size: 200
          propagations_per_real_world_graph: 100
          relative_n_sources:
          - 0.005
          - 0.05
          relative_infected:
          - 0.2
          - 0.5
          n_nodes:
          - 500
          - 5000
          watts_strogatz_neighbours:
          - 0.1
          - 2.0
          watts_strogatz_probability:
          - 0.1
          - 0.4
          beta:
          - 0.001
          - 0.005
          root_seed_training: 11650217406899810833644412201113384193
          root_seed_validation: 11650217406899810833644412201113384194
    outs:
    - path: data/validation/karate/raw
      md5: e97b1120280b980c813d5755646ee23b.dir
      size: 442998
      nfiles: 100
  process-validation-data@karate:
    cmd: python -W ignore -m src.data_processing --validation --dataset=karate
    deps:
    - path: data/validation/karate/raw
      md5: e97b1120280b980c813d5755646ee23b.dir
      size: 442998
      nfiles: 100
    - path: src/data_processing.py
      md5: 5275e981cbb0f68c1aa88a3de15156f2
      size: 6544
    params:
      params.yaml:
        data_creation:
          small_input: true
          training_size: 1000
          validation_size: 200
          propagations_per_real_world_graph: 100
          relative_n_sources:
          - 0.005
          - 0.05
          relative_infected:
          - 0.2
          - 0.5
          n_nodes:
          - 500
          - 5000
          watts_strogatz_neighbours:
          - 0.1
          - 2.0
          watts_strogatz_probability:
          - 0.1
          - 0.4
          beta:
          - 0.001
          - 0.005
          root_seed_training: 11650217406899810833644412201113384193
          root_seed_validation: 11650217406899810833644412201113384194
        model: GCNR
    outs:
    - path: data/validation/karate/processed
      md5: 33dc30fa1dca246b3eebd0c8788632f3.dir
      size: 450214
      nfiles: 102
  generate-training-data:
    cmd: python -W ignore -m src.data_creation --dataset="synthetic"
    deps:
    - path: src/data_creation.py
      md5: c0be7bed9571a10e4a90bc555e3882da
      size: 9621
    params:
      params.yaml:
        data_creation:
          small_input: true
          training_size: 1000
          validation_size: 200
          propagations_per_real_world_graph: 100
          relative_n_sources:
          - 0.005
          - 0.05
          relative_infected:
          - 0.2
          - 0.5
          n_nodes:
          - 500
          - 5000
          watts_strogatz_neighbours:
          - 0.1
          - 2.0
          watts_strogatz_probability:
          - 0.1
          - 0.4
          beta:
          - 0.001
          - 0.005
          root_seed_training: 11650217406899810833644412201113384193
          root_seed_validation: 11650217406899810833644412201113384194
    outs:
    - path: data/training/synthetic/raw
      md5: 11cc09db8447eccaae1a75e34fb5640c.dir
      size: 2600772978
      nfiles: 1000
  process-training-data:
    cmd: python -W ignore -m src.data_processing
    deps:
    - path: data/training/synthetic/raw
      md5: 11cc09db8447eccaae1a75e34fb5640c.dir
      size: 2600772978
      nfiles: 1000
    - path: src/data_processing.py
      md5: 5275e981cbb0f68c1aa88a3de15156f2
      size: 6544
    params:
      params.yaml:
        data_creation:
          small_input: true
          training_size: 1000
          validation_size: 200
          propagations_per_real_world_graph: 100
          relative_n_sources:
          - 0.005
          - 0.05
          relative_infected:
          - 0.2
          - 0.5
          n_nodes:
          - 500
          - 5000
          watts_strogatz_neighbours:
          - 0.1
          - 2.0
          watts_strogatz_probability:
          - 0.1
          - 0.4
          beta:
          - 0.001
          - 0.005
          root_seed_training: 11650217406899810833644412201113384193
          root_seed_validation: 11650217406899810833644412201113384194
        model: GCNR
    outs:
    - path: data/training/synthetic/processed
      md5: 35add1910174c981d4b64bc968297fd8.dir
      size: 2600781602
      nfiles: 1002
  training:
    cmd: python -W ignore -m src.training
    deps:
    - path: data/training/synthetic/processed
      md5: 35add1910174c981d4b64bc968297fd8.dir
      size: 2600781602
      nfiles: 1002
    - path: src/training.py
      md5: c6941bd9fd3e5a6d0ba6882d7526686a
      size: 5623
    params:
      params.yaml:
        model: GCNR
        model_name:
        training:
          alpha: 0.5
          batch_size: 10
          epochs: 100
          hidden_size: 512
          layers: 10
          learning_rate: 1e-06
          subsample: true
          useLogLoss: true
          class_weighting: false
          graph_weighting: false
          weight_decay: 1e-08
    outs:
    - path: models/latest.pth
      md5: 0449036bc25ca97922364aed9103bf96
      size: 1058831
