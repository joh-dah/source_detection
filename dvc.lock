schema: '2.0'
stages:
  data-creation:
    cmd: python -W ignore -m src.data_creation
    deps:
    - path: src/data_creation.py
      md5: 76ec9fe9de2a59dccfca9c2f14ea1a4b
      size: 5746
    params:
      params.json:
        data_creation:
          graph_type: watts_strogatz
          prop_model: SI
          training_size: 10000
          validation_size: 300
          mean_nodes: 1000
          ws_neighbours: 10
          ws_probability: 0.2
          ba_neighbours: 3
          mean_sources: 3
          mean_iters: 35
          sir_beta: 0.01
          sir_gamma: 0.005
          si_beta: 0.01
    outs:
    - path: data/raw
      md5: 34932d42a0c3b0979b980cdb34f644cc.dir
      size: 1744495710
      nfiles: 10300
  data-processing:
    cmd: python -W ignore -m src.data_processing
    deps:
    - path: data/raw
      md5: 34932d42a0c3b0979b980cdb34f644cc.dir
      size: 1744495710
      nfiles: 10300
    - path: src/data_processing.py
      md5: cbf6c7de151fcce58172a30728a42265
      size: 3797
    params:
      params.json:
        data_creation:
          graph_type: watts_strogatz
          prop_model: SI
          training_size: 10000
          validation_size: 300
          mean_nodes: 1000
          ws_neighbours: 10
          ws_probability: 0.2
          ba_neighbours: 3
          mean_sources: 3
          mean_iters: 35
          sir_beta: 0.01
          sir_gamma: 0.005
          si_beta: 0.01
        model: GCNSI
    outs:
    - path: data/processed
      md5: 286d4208c8c94231765fee7d7098c93f.dir
      size: 1867985038
      nfiles: 10302
  training:
    cmd: python -W ignore -m src.training
    deps:
    - path: data/processed
      md5: 286d4208c8c94231765fee7d7098c93f.dir
      size: 1867985038
      nfiles: 10302
    - path: src/training.py
      md5: 82115914d5fab9d09b59249dd3f785c2
      size: 2500
    params:
      params.json:
        model: GCNSI
        training:
          epochs: 5
          learning_rate: 0.0008
          hidden_size: 512
          layers: 10
          weight_decay: 1e-08
          alpha: 0.5
          batch_size: 100
    outs:
    - path: models/latest.pth
      md5: 40688091805af8a9e0a7b4830f039620
      size: 1064975
  validation:
    cmd: python -W ignore -m src.validation
    deps:
    - path: data/processed
      md5: 286d4208c8c94231765fee7d7098c93f.dir
      size: 1867985038
      nfiles: 10302
    - path: models/latest.pth
      md5: 40688091805af8a9e0a7b4830f039620
      size: 1064975
    - path: src/validation.py
      md5: c12a091b04138882c0152ee33cc460db
      size: 13585
    params:
      params.json:
        model: GCNSI
    outs:
    - path: reports/latest.json
      md5: e1e75e5d095ebf9bae9b09256e5ac638
      size: 403
  visualisation:
    cmd: python -W ignore -m src.visualization
    deps:
    - path: data/processed
      md5: 286d4208c8c94231765fee7d7098c93f.dir
      size: 1867985038
      nfiles: 10302
    - path: models/latest.pth
      md5: 40688091805af8a9e0a7b4830f039620
      size: 1064975
    - path: src/visualization.py
      md5: bc26f9a253fbdb3d5f50f0818cd98d5e
      size: 5655
    params:
      params.json:
        model: GCNSI
        visualization:
          seed: 123
    outs:
    - path: figures
      md5: ac72705ece2710ce690c6bdd7f2c79ce.dir
      size: 2275122
      nfiles: 15
