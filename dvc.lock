schema: '2.0'
stages:
  data-creation:
    cmd: python -W ignore -m src.data_creation
    deps:
    - path: src/data_creation.py
      md5: 6b57fef53f17148008fa82fdcb445845
      size: 5744
    params:
      params.yaml:
        data_creation:
        - graph_type: watts_strogatz
        - prop_model: SI
        - training_size: 100
        - validation_size: 30
        - mean_nodes: 100
        - ws_neighbours: 10
        - ws_probability: 0.2
        - ba_neighbours: 3
        - mean_sources: 2
        - mean_iters: 90
        - sir_beta: 0.01
        - sir_gamma: 0.005
        - si_beta: 0.01
        - small_input: false
    outs:
    - path: data/raw
      md5: 221026a358e34420ba71254583e949d2.dir
      size: 1818166
      nfiles: 100
  data-processing:
    cmd: python -W ignore -m src.data_processing
    deps:
    - path: data/raw
      md5: b0d88de76b3a1a563abd4dae26d636c3.dir
      size: 2169250
      nfiles: 120
    - path: src/data_processing.py
      md5: 30243f5f313ed5b571d71014dccbaaef
      size: 5161
    params:
      params.json:
        data_creation:
          graph_type: watts_strogatz
          prop_model: SI
          training_size: 100
          validation_size: 20
          mean_nodes: 100
          ws_neighbours: 10
          ws_probability: 0.2
          ba_neighbours: 3
          mean_sources: 2
          iterations: 6
          small_input: false
        model: GCNSI
    outs:
    - path: data/processed
      md5: 7685b3ddb18b09f7cf8ae33cd914e560.dir
      size: 2312850
      nfiles: 122
  training:
    cmd: python -W ignore -m src.training
    deps:
    - path: data/training/synthetic/processed
      md5: 8ea4db48729c3a663e9bb3f263eb63a9.dir
      size: 1934694
      nfiles: 102
    - path: src/training.py
      md5: b1ec1763aa328b12ea86b019563be8b2
      size: 3515
    params:
      params.yaml:
        model: GCNSI
        model_name: '0'
        training:
          alpha: 0.5
          batch_size: 10
          epochs: 10
          hidden_size: 512
          layers: 10
          learning_rate: 1e-05
          subsample: false
          useLogLoss: false
          weight_decay: 1e-08
    outs:
    - path: models/latest.pth
      md5: d2729fff6ad2b4f90de0d3fa916271d9
      size: 1064911
  visualisation:
    cmd: python -W ignore -m src.visualization
    deps:
    - path: data/processed
      md5: 7685b3ddb18b09f7cf8ae33cd914e560.dir
      size: 2312850
      nfiles: 122
    - path: models/latest.pth
      md5: ed4a986f26bb7c50b7b91243e488d235
      size: 1064911
    - path: src/visualization.py
      md5: ba6f1d9079842400d8e7ee2105ac6914
      size: 5525
    params:
      params.json:
        model: GCNSI
        visualization:
          seed: 123
    outs:
    - path: figures
      md5: 907b1652148eb2cb94e6eb00fe719505.dir
      size: 2567697
      nfiles: 15
  validation:
    cmd: python -W ignore -m src.validation
    deps:
    - path: data/processed
      md5: 7685b3ddb18b09f7cf8ae33cd914e560.dir
      size: 2312850
      nfiles: 122
    - path: models/latest.pth
      md5: ed4a986f26bb7c50b7b91243e488d235
      size: 1064911
    - path: src/validation.py
      md5: e305fa5f8fc95c22398e9a7fdaadf93a
      size: 18452
    params:
      params.json:
        model: GCNSI
        model_name: '0'
    outs:
    - path: reports/latest.json
      md5: 402ef52f1c59634e8d293d42eb9983b1
      size: 4892
  test@b:
    cmd: echo b
  test@a:
    cmd: echo a
  tralala@b:
    cmd: echo b
  tralala@c:
    cmd: echo c
  tralala@a:
    cmd: echo a
  generate-training-data:
    cmd: python -W ignore -m src.data_creation --dataset="synthetic"
    deps:
    - path: src/data_creation.py
      md5: 7129bde8c3fb2d86a724d89626e3172a
      size: 7222
    params:
      params.yaml:
        data_creation:
          ba_neighbours: 3
          graph_type: watts_strogatz
          mean_iters: 90
          mean_nodes: 100
          mean_sources: 2
          prop_model: SI
          si_beta: 0.01
          sir_beta: 0.01
          sir_gamma: 0.005
          small_input: false
          training_size: 100
          validation_size: 20
          ws_neighbours: 10
          ws_probability: 0.2
    outs:
    - path: data/training/synthetic/raw
      md5: 60407502d07da10825c8ac220b857adf.dir
      size: 1814518
      nfiles: 100
  generate-validation-data@synthetic:
    cmd: python -W ignore -m src.data_creation --validation --dataset=synthetic
    deps:
    - path: src/data_creation.py
      md5: 7129bde8c3fb2d86a724d89626e3172a
      size: 7222
    params:
      params.yaml:
        data_creation:
          ba_neighbours: 3
          graph_type: watts_strogatz
          mean_iters: 90
          mean_nodes: 100
          mean_sources: 2
          prop_model: SI
          si_beta: 0.01
          sir_beta: 0.01
          sir_gamma: 0.005
          small_input: false
          training_size: 100
          validation_size: 20
          ws_neighbours: 10
          ws_probability: 0.2
    outs:
    - path: data/validation/synthetic/raw
      md5: 2bb44d2329cf16f9d63874372a987e38.dir
      size: 367830
      nfiles: 20
  generate-validation-data@airports:
    cmd: python -W ignore -m src.data_creation --validation --dataset=airports
    deps:
    - path: src/data_creation.py
      md5: 7129bde8c3fb2d86a724d89626e3172a
      size: 7222
    params:
      params.yaml:
        data_creation:
          ba_neighbours: 3
          graph_type: watts_strogatz
          mean_iters: 90
          mean_nodes: 100
          mean_sources: 2
          prop_model: SI
          si_beta: 0.01
          sir_beta: 0.01
          sir_gamma: 0.005
          small_input: false
          training_size: 100
          validation_size: 20
          ws_neighbours: 10
          ws_probability: 0.2
    outs:
    - path: data/validation/airports/raw
      md5: 3b14469dc04d66ecc8a92cf2baa78eeb.dir
      size: 196357
      nfiles: 1
  process-training-data:
    cmd: python -W ignore -m src.data_processing
    deps:
    - path: data/training/synthetic/raw
      md5: 60407502d07da10825c8ac220b857adf.dir
      size: 1814518
      nfiles: 100
    - path: src/data_processing.py
      md5: d9d01217f5f7c4d627e9f1b8f4c5b1c1
      size: 5818
    params:
      params.yaml:
        data_creation:
          ba_neighbours: 3
          graph_type: watts_strogatz
          mean_iters: 90
          mean_nodes: 100
          mean_sources: 2
          prop_model: SI
          si_beta: 0.01
          sir_beta: 0.01
          sir_gamma: 0.005
          small_input: false
          training_size: 100
          validation_size: 20
          ws_neighbours: 10
          ws_probability: 0.2
        model: GCNSI
    outs:
    - path: data/training/synthetic/processed
      md5: 8ea4db48729c3a663e9bb3f263eb63a9.dir
      size: 1934694
      nfiles: 102
  process-validation-data@synthetic:
    cmd: python -W ignore -m src.data_processing --validation --dataset=synthetic
    deps:
    - path: data/validation/synthetic/raw
      md5: 2bb44d2329cf16f9d63874372a987e38.dir
      size: 367830
      nfiles: 20
    - path: src/data_processing.py
      md5: d9d01217f5f7c4d627e9f1b8f4c5b1c1
      size: 5818
    params:
      params.yaml:
        data_creation:
          ba_neighbours: 3
          graph_type: watts_strogatz
          mean_iters: 90
          mean_nodes: 100
          mean_sources: 2
          prop_model: SI
          si_beta: 0.01
          sir_beta: 0.01
          sir_gamma: 0.005
          small_input: false
          training_size: 100
          validation_size: 20
          ws_neighbours: 10
          ws_probability: 0.2
        model: GCNSI
    outs:
    - path: data/validation/synthetic/processed
      md5: bd4e1e14b38c86bd8745569f4cd1ff7c.dir
      size: 392902
      nfiles: 22
  validation@synthetic:
    cmd: python -W ignore -m src.validation --dataset=synthetic
    deps:
    - path: data/validation/synthetic/processed
      md5: bd4e1e14b38c86bd8745569f4cd1ff7c.dir
      size: 392902
      nfiles: 22
    - path: models/latest.pth
      md5: d2729fff6ad2b4f90de0d3fa916271d9
      size: 1064911
    - path: src/validation.py
      md5: 1efe472251b238fbab8c73cf4ffef171
      size: 16601
    params:
      params.yaml:
        model: GCNSI
        model_name: '0'
  generate-validation-data@karate:
    cmd: python -W ignore -m src.data_creation --validation --dataset=karate
    deps:
    - path: src/data_creation.py
      md5: 7129bde8c3fb2d86a724d89626e3172a
      size: 7222
    params:
      params.yaml:
        data_creation:
          ba_neighbours: 3
          graph_type: watts_strogatz
          mean_iters: 90
          mean_nodes: 100
          mean_sources: 2
          prop_model: SI
          si_beta: 0.01
          sir_beta: 0.01
          sir_gamma: 0.005
          small_input: false
          training_size: 100
          validation_size: 20
          ws_neighbours: 10
          ws_probability: 0.2
    outs:
    - path: data/validation/karate/raw
      md5: 097a27493b214f33ad1873f9eab0c4b0.dir
      size: 4229
      nfiles: 1
  process-validation-data@karate:
    cmd: python -W ignore -m src.data_processing --validation --dataset=karate
    deps:
    - path: data/validation/karate/raw
      md5: 097a27493b214f33ad1873f9eab0c4b0.dir
      size: 4229
      nfiles: 1
    - path: src/data_processing.py
      md5: d9d01217f5f7c4d627e9f1b8f4c5b1c1
      size: 5818
    params:
      params.yaml:
        data_creation:
          ba_neighbours: 3
          graph_type: watts_strogatz
          mean_iters: 90
          mean_nodes: 100
          mean_sources: 2
          prop_model: SI
          si_beta: 0.01
          sir_beta: 0.01
          sir_gamma: 0.005
          small_input: false
          training_size: 100
          validation_size: 20
          ws_neighbours: 10
          ws_probability: 0.2
        model: GCNSI
    outs:
    - path: data/validation/karate/processed
      md5: c298c9c3ce1aa9a9fa1ea50bb9b7b8ae.dir
      size: 5493
      nfiles: 3
  process-validation-data@airports:
    cmd: python -W ignore -m src.data_processing --validation --dataset=airports
    deps:
    - path: data/validation/airports/raw
      md5: 3b14469dc04d66ecc8a92cf2baa78eeb.dir
      size: 196357
      nfiles: 1
    - path: src/data_processing.py
      md5: d9d01217f5f7c4d627e9f1b8f4c5b1c1
      size: 5818
    params:
      params.yaml:
        data_creation:
          ba_neighbours: 3
          graph_type: watts_strogatz
          mean_iters: 90
          mean_nodes: 100
          mean_sources: 2
          prop_model: SI
          si_beta: 0.01
          sir_beta: 0.01
          sir_gamma: 0.005
          small_input: false
          training_size: 100
          validation_size: 20
          ws_neighbours: 10
          ws_probability: 0.2
        model: GCNSI
    outs:
    - path: data/validation/airports/processed
      md5: c3e6cc99a47892a579028ee8183ba9c4.dir
      size: 202037
      nfiles: 3
  validation@airports:
    cmd: python -W ignore -m src.validation --dataset=airports
    deps:
    - path: data/validation/airports/processed
      md5: c3e6cc99a47892a579028ee8183ba9c4.dir
      size: 202037
      nfiles: 3
    - path: models/latest.pth
      md5: d2729fff6ad2b4f90de0d3fa916271d9
      size: 1064911
    - path: src/validation.py
      md5: 1efe472251b238fbab8c73cf4ffef171
      size: 16601
    params:
      params.yaml:
        model: GCNSI
        model_name: '0'
  validation@karate:
    cmd: python -W ignore -m src.validation --dataset=karate
    deps:
    - path: data/validation/karate/processed
      md5: c298c9c3ce1aa9a9fa1ea50bb9b7b8ae.dir
      size: 5493
      nfiles: 3
    - path: models/latest.pth
      md5: d2729fff6ad2b4f90de0d3fa916271d9
      size: 1064911
    - path: src/validation.py
      md5: 1efe472251b238fbab8c73cf4ffef171
      size: 16601
    params:
      params.yaml:
        model: GCNSI
        model_name: '0'
